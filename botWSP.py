import telebot
from telebot import types

TOKEN = "---"
ADMIN_ID = "---"
CHAT_LINK = "---"  #

bot = telebot.TeleBot(TOKEN)

user_states = {}


def create_main_keyboard():
    keyboard = types.InlineKeyboardMarkup()
    btn_manual = types.InlineKeyboardButton("üìñ –ú–∞–Ω—É–∞–ª", callback_data="manual")
    btn_question = types.InlineKeyboardButton(
        "‚ùì –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å", callback_data="ask_question"
    )
    keyboard.add(btn_manual, btn_question)
    return keyboard


# –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
@bot.message_handler(commands=["start"])
def send_welcome(message):
    bot.send_message(
        message.chat.id,
        "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
        reply_markup=create_main_keyboard(),
    )


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–æ–∫
@bot.callback_query_handler(func=lambda call: True)
def callback_query(call):
    if call.data == "manual":
        send_manual(call.message)

    elif call.data == "ask_question":
        user_states[call.from_user.id] = "waiting_question"
        bot.send_message(
            call.message.chat.id,
            "–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å –∏ —è –ø–µ—Ä–µ—à–ª—é –µ–≥–æ –∞–¥–º–∏–Ω—É! –û–Ω –æ—Ç–≤–µ—Ç–∏—Ç –≤–∞–º –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.",
        )

    elif call.data == "confirm_read":
        # —Å—Å—ã–ª–∫—É –Ω–∞ —á–∞—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é
        bot.send_message(
            call.message.chat.id,
            f"üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –Ω–∞—à–µ–º—É —á–∞—Ç—É:\n{CHAT_LINK}",
            reply_markup=create_main_keyboard(),
        )


def send_manual(message):
    manual_text = """üìö –ü–æ–ª–Ω—ã–π –º–∞–Ω—É–∞–ª:
    
1.  –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω –∞–∫–∫ –≤ –≤–∞—Ç—Å–∞–ø:
–¢–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–∫–ª–∞–º—ã –º–∞–≥–∞–∑–∏–Ω–æ–≤ (WB, OZON, MAAG –∏ –¥—Ä—É–≥–∏–µ).
‚Äî –í–∞–∂–Ω–æ: –¢–≤–æ–∏ –ª–∏—á–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏! –£ –º–∞–≥–∞–∑–∏–Ω–æ–≤ —Å–≤–æ—è –±–∞–∑–∞ –Ω–æ–º–µ—Ä–æ–≤.
‚Äî –ù–∏–∫–∞–∫–∏—Ö –Ω–µ–∑–∞–∫–æ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π! –¢–æ–ª—å–∫–æ –ª–µ–≥–∞–ª—å–Ω–∞—è —Ä–µ–∫–ª–∞–º–∞.

 –¢—ã –¥–∞–µ—à—å –º–Ω–µ –Ω–æ–º–µ—Ä —Å–≤–æ–µ–≥–æ WhatsApp –∏ –∫–æ–¥ –¥–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è.
‚Äî –Ø –ø–ª–∞—á—É —Ç–µ–±–µ 10$ –∑–∞ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ 8 —á–∞—Å–æ–≤.
‚Äî –¢—ã –Ω–µ –∑–∞—Ö–æ–¥–∏—à—å –≤ WhatsApp, –ø–æ–∫–∞ –æ–Ω –≤ –∞—Ä–µ–Ω–¥–µ.
2.  –ö–∞–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç:
–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç, –ª–∏–±–æ –∂–µ –Ω–µ—Ç, —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç–µ—Å—å(–ø—Ä–æ–±–ª–µ–º –∑–∞—Ä–µ–≥–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –≤–∞—Ç—Å–∞–ø–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å) , –¥–∞–ª—å—à–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≥—Ä–µ—Ç—å –∞–∫–∫ –≤–∫–ª–∞–¥–∫–∞ –Ω–∏–∂–µ ‚¨áÔ∏è 
3. –ö–∞–∫ –ø—Ä–æ–≥—Ä–µ—Ç—å –∞–∫–∫:
–ì—Ä–µ—Ç—å –Ω–µ —Ç–∞–∫ —Å–ª–æ–∂–Ω–æ, –Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–∞–±—ã –∞–∫–∫–∏ —Å—Ç–æ—è–ª–∏ –∂–∏–≤—ã–º–∏ –Ω–∞ —á–∞—Å—ã. 5 –∑–≤–æ–Ω–∫–æ–≤ –ø–æ 5 –º–∏–Ω—É—Ç, 5 —á–∞—Ç–æ–≤ –ø–æ 15 —Å–æ–æ–±—â–µ–Ω–∏–π, 6 –≥—Å –º–æ–∂–Ω–æ –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É. –°–æ–æ–±—â–µ–Ω–∏—è –º–æ–∂–Ω–æ –≤ —Ç—É–ø—É—é –ø—Ä–æ—Ç—ã–∫–∞—Ç—å –¢9.
4.  –°—É—Ç—å —Ä–∞–±–æ—Ç—ã:
‚Äî –¢—ã –¥–∞–µ—à—å –º–Ω–µ –Ω–æ–º–µ—Ä —Å–≤–æ–µ–≥–æ WhatsApp –∏ –∫–æ–¥ –¥–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è.
‚Äî –Ø –ø–ª–∞—á—É —Ç–µ–±–µ 10$ –∑–∞ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ 8 —á–∞—Å–æ–≤.
‚Äî –¢—ã –Ω–µ –∑–∞—Ö–æ–¥–∏—à—å –≤ WhatsApp, –ø–æ–∫–∞ –æ–Ω –≤ –∞—Ä–µ–Ω–¥–µ.

–î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–∫–∫–∞—É–Ω—Ç?
‚Äî –¢–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–∫–ª–∞–º—ã –º–∞–≥–∞–∑–∏–Ω–æ–≤ (WB, OZON, MAAG –∏ –¥—Ä—É–≥–∏–µ).
‚Äî –í–∞–∂–Ω–æ: –¢–≤–æ–∏ –ª–∏—á–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏! –£ –º–∞–≥–∞–∑–∏–Ω–æ–≤ —Å–≤–æ—è –±–∞–∑–∞ –Ω–æ–º–µ—Ä–æ–≤.
‚Äî –ù–∏–∫–∞–∫–∏—Ö –Ω–µ–∑–∞–∫–æ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π! –¢–æ–ª—å–∫–æ –ª–µ–≥–∞–ª—å–Ω–∞—è —Ä–µ–∫–ª–∞–º–∞.

–û–ø–ª–∞—Ç–∞:
‚Äî –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 21:00-22:00 –Ω–∞ —Ç–≤–æ–π —Å—á–µ—Ç.(–∫—Ä–∏–ø—Ç–æ–∫–æ—à–µ–ª—ë–∫)

–£—Å–ª–æ–≤–∏—è:
‚Äî –ê–∫–∫–∞—É–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–º.
‚Äî –ù–µ –∑–∞—Ö–æ–¥–∏—Ç—å –≤ WhatsApp, –ø–æ–∫–∞ –æ–Ω –≤ –∞—Ä–µ–Ω–¥–µ.

    
‚ö†Ô∏è –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –≤—Å–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –¥–æ –∫–æ–Ω—Ü–∞! –ü–æ—Å–ª–µ –ø—Ä–æ—á—Ç–µ–Ω–∏—è –ø–∏—Å–∞—Ç—å @llzgg1 –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è!"""

    # –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –∫–Ω–æ–ø–∫–æ–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    confirm_keyboard = types.InlineKeyboardMarkup()
    confirm_btn = types.InlineKeyboardButton(
        "‚úÖ –Ø –ø—Ä–æ—á–∏—Ç–∞–ª(–∞) –ø–æ–ª–Ω–æ—Å—Ç—å—é", callback_data="confirm_read"
    )
    confirm_keyboard.add(confirm_btn)

    #  –º–∞–Ω—É–∞–ª —Å –∫–Ω–æ–ø–∫–æ–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    bot.send_message(
        message.chat.id, manual_text, reply_markup=confirm_keyboard, parse_mode="HTML"
    )


@bot.message_handler(content_types=["text"])
def handle_text(message):
    if user_states.get(message.from_user.id) == "waiting_question":

        username = (
            f"@{message.from_user.username}"
            if message.from_user.username
            else "–±–µ–∑ username"
        )
        report = f"‚úâÔ∏è –ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {username} (ID: {message.from_user.id}):\n\n{message.text}"
        bot.send_message(ADMIN_ID, report)

        user_states.pop(message.from_user.id, None)
        bot.send_message(message.chat.id, "‚úÖ –í–∞—à –≤–æ–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∞–¥–º–∏–Ω—É! –°–ø–∞—Å–∏–±–æ!")


# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
if __name__ == "__main__":
    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!")
    bot.infinity_polling()
